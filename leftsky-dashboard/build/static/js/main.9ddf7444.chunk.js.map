{"version":3,"sources":["websocket-api.js","sites.jsx","App.js","reportWebVitals.js","index.js","sites.module.scss"],"names":["socket","status","startWebsocket","WebSocket","document","domain","onopen","onclose","sendCmd","cmd","data","Promise","resolve","reject","onmessage","res","JSON","parse","setTimeout","send","stringify","sites","state","newSites","console","log","wsapi","domains","dest_ip","name","then","getSites","delSite","newSSL","this","setState","className","styles","boxes","_","map","item","boxItem","vhost_dest_ip","onClick","use_ssl","addBox","onKeyUp","e","target","value","placeholder","PureComponent","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"kLAAIA,E,0GACAC,EAAS,EA0CE,OACbC,eA1CF,YACEF,EAAS,IAAIG,UAAJ,eAAsBC,SAASC,OAA/B,WAEFC,OAAS,WAEdL,EAAS,GAEXD,EAAOO,QAAU,WAEfN,EAAS,IAkCXO,QAxBF,SAAiBC,EAAKC,GACpB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAEZ,IAAXZ,GACFY,GAAQ,GAGVb,EAAOc,UAAY,SAAAC,GACjBH,EAAQI,KAAKC,MAAMF,EAAIL,QAGzBQ,YAAW,WACTL,GAAQ,KACP,KAEHb,EAAOmB,KAAKH,KAAKI,UAAU,CACzBX,MACAC,e,OCjCeW,E,4MACnBC,MAAQ,CACND,MAAO,I,EAmBTE,SAAW,WACW,KAAhB,EAAKlB,SAGTmB,QAAQC,IAAI,EAAKpB,QACjBqB,EAAMlB,QAAQ,UAAW,CACvBmB,QAAS,EAAKtB,OACduB,QAAS,EAAKA,QACdC,KAAM,EAAKA,OACVC,MAAK,SAAAf,GACN,EAAKgB,gB,EAITC,QAAU,SAAC3B,GACTqB,EAAMlB,QAAQ,UAAW,CACvBH,OAAQA,IACPyB,MAAK,SAAAf,GACN,EAAKgB,e,EAITE,OAAS,SAAC5B,GACRqB,EAAMlB,QAAQ,SAAU,CAAEH,WAAUyB,MAAK,SAAAf,GACvCS,QAAQC,IAAIV,O,uDAxChB,WAAqB,IAAD,OAClBmB,KAAK7B,OAAS,GACda,YAAW,WACT,EAAKa,aACJ,O,sBAGL,WAAY,IAAD,OACTL,EAAMlB,QAAQ,WAAY,IAAIsB,MAAK,SAAAf,GACjCS,QAAQC,IAAIV,GACZ,EAAKoB,SAAS,CACZd,MAAON,S,oBAiCb,WAAU,IAAD,OACCM,EAAUa,KAAKZ,MAAfD,MACR,OAAO,gCACL,qBAAKe,UAAWC,IAAOC,MAAvB,SACGC,IAAEC,IAAInB,GAAO,SAAAoB,GACZ,IAAIpC,EAAUoC,GAAQA,EAAKd,QAAWc,EAAKd,QAAQ,GAAK,eACxD,OAAO,sBAAkBS,UAAWC,IAAOK,QAApC,UACL,qDAASrC,KACT,qDAASoC,EAAKZ,QACd,uCAAUY,EAAKE,iBACf,sBAAKC,QAAS,kBAAM,EAAKX,OAAO5B,IAAhC,8CAAkDoC,EAAKI,QAAU,eAAO,wBACxE,wBAAQD,QAAS,kBAAM,EAAKZ,QAAQ3B,IAApC,iBALeA,QASrB,sBAAK+B,UAAWC,IAAOS,OAAvB,UACE,uBAAOC,QAAS,SAAAC,GAAO,EAAK3C,OAAS2C,EAAEC,OAAOC,OAASC,YAAY,iBACnE,uBAAOJ,QAAS,SAAAC,GAAO,EAAKpB,QAAUoB,EAAEC,OAAOC,OAASC,YAAY,mBACpE,uBAAOJ,QAAS,SAAAC,GAAO,EAAKnB,KAAOmB,EAAEC,OAAOC,OAASC,YAAY,6BACjE,wBAAQP,QAASV,KAAKX,SAAtB,gD,GApE2B6B,iBCqBpBC,MAtBf,WACE,OACE,qBAAKjB,UAAU,MAAf,SACE,cAAC,EAAD,OCKSkB,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB1B,MAAK,YAAkD,IAA/C2B,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAd7B,EAAMxB,iBAEN4D,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF5D,SAAS6D,eAAe,SAM1BX,K,kBClBAY,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,QAAU,uBAAuB,OAAS,yB","file":"static/js/main.9ddf7444.chunk.js","sourcesContent":["var socket;\r\nlet status = 0;\r\nfunction startWebsocket() {\r\n  socket = new WebSocket(`ws://${document.domain}:1300`);\r\n  // socket.send('1');\r\n  socket.onopen = () => {\r\n    // 连接成功\r\n    status = 1;\r\n  }\r\n  socket.onclose = () => {\r\n    // 断开连接\r\n    status = 0;\r\n  }\r\n\r\n  // socket.onmessage = res => {\r\n  //   if (typeof cb === \"function\") {\r\n  //     cb(res);\r\n  //   }\r\n  // }\r\n}\r\n\r\nfunction sendCmd(cmd, data) {\r\n  return new Promise((resolve, reject) => {\r\n    // 如果状态不是连接成功，则返回失败\r\n    if (status !== 1) {\r\n      reject(-1);\r\n    }\r\n    // 如果拉取到信息，则返回给promise\r\n    socket.onmessage = res => {\r\n      resolve(JSON.parse(res.data));\r\n    }\r\n    // 超时三秒算作失败\r\n    setTimeout(() => {\r\n      reject(-1);\r\n    }, 3000);\r\n    // 发送命令\r\n    socket.send(JSON.stringify({\r\n      cmd,\r\n      data\r\n    }))\r\n  })\r\n}\r\n\r\nexport default {\r\n  startWebsocket,\r\n  sendCmd\r\n}\r\n","import React, { PureComponent } from 'react'\r\nimport _ from \"loadsh\";\r\nimport styles from './sites.module.scss'\r\nimport wsapi from './websocket-api'\r\n\r\nexport default class sites extends PureComponent {\r\n  state = {\r\n    sites: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.domain = \"\";\r\n    setTimeout(() => {\r\n      this.getSites();\r\n    }, 500);\r\n  }\r\n\r\n  getSites() {\r\n    wsapi.sendCmd(\"getSites\", {}).then(res => {\r\n      console.log(res)\r\n      this.setState({\r\n        sites: res\r\n      })\r\n    })\r\n  }\r\n\r\n  newSites = () => {\r\n    if (this.domain === \"\") {\r\n      return;\r\n    }\r\n    console.log(this.domain);\r\n    wsapi.sendCmd(\"newSite\", {\r\n      domains: this.domain,\r\n      dest_ip: this.dest_ip,\r\n      name: this.name\r\n    }).then(res => {\r\n      this.getSites();\r\n    })\r\n  }\r\n\r\n  delSite = (domain) => {\r\n    wsapi.sendCmd(\"delSite\", {\r\n      domain: domain\r\n    }).then(res => {\r\n      this.getSites();\r\n    })\r\n  }\r\n\r\n  newSSL = (domain) => {\r\n    wsapi.sendCmd(\"newSSL\", { domain }).then(res => {\r\n      console.log(res)\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { sites } = this.state;\r\n    return <div>\r\n      <div className={styles.boxes}>\r\n        {_.map(sites, item => {\r\n          let domain = (item && item.domains) ? item.domains[0] : '未知';\r\n          return <div key={domain} className={styles.boxItem}>\r\n            <div>域名：{domain}</div>\r\n            <div>名称：{item.name}</div>\r\n            <div>IP: {item.vhost_dest_ip}</div>\r\n            <div onClick={() => this.newSSL(domain)}>SLL证书状态：{item.use_ssl ? '可用' : '不可用'}</div>\r\n            <button onClick={() => this.delSite(domain)}>X</button>\r\n          </div>\r\n        })}\r\n      </div>\r\n      <div className={styles.addBox}>\r\n        <input onKeyUp={e => { this.domain = e.target.value }} placeholder=\"域名\" />\r\n        <input onKeyUp={e => { this.dest_ip = e.target.value }} placeholder=\"容器IP\" />\r\n        <input onKeyUp={e => { this.name = e.target.value }} placeholder=\"网站名称\" />\r\n        <button onClick={this.newSites}>新增网站</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","// import logo from './logo.svg';\nimport './App.css';\nimport Sites from './sites'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Sites></Sites>\n      {/* <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>\n          Edit <code>src/App.js</code> and save to reload.\n        </p>\n        <a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n      </header> */}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport wsapi from './websocket-api'\r\n\r\nwsapi.startWebsocket();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"boxes\":\"sites_boxes__3if0S\",\"boxItem\":\"sites_boxItem__25cKL\",\"addBox\":\"sites_addBox__2czle\"};"],"sourceRoot":""}